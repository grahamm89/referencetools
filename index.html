<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PEG Dilution Reference</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    input, select {
      padding: 6px;
      margin-bottom: 12px;
      font-size: 14px;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 6px;
      text-align: center;
    }
    th {
      background: #f0f0f0;
      cursor: pointer;
    }
    tr.category-row {
      background: #e2e2e2;
      font-weight: bold;
    }
    tr.hidden {
      display: none;
    }
  </style>
</head>
<body>

  <h1>PEG Dilution Reference</h1>

  <label for="search">Search Product:</label>
  <input type="text" id="search" placeholder="e.g. Suma Multi D2" />

  <label for="categoryFilter">Filter by Category:</label>
  <select id="categoryFilter">
    <option value="All">All</option>
    <option value="Kitchen Care">Kitchen Care</option>
    <option value="Building Care">Building Care</option>
    <option value="Floor Care">Floor Care</option>
  </select>

  <table id="pegTable">
    <thead>
      <tr>
        <th onclick="sortTable(0)">Product</th>
        <th onclick="sortTable(1)">Trigger PEG</th>
        <th onclick="sortTable(2)">Min</th>
        <th onclick="sortTable(3)">Max</th>
        <th onclick="sortTable(4)">Dilution %</th>
        <th onclick="sortTable(5)">Bucket PEG</th>
        <th onclick="sortTable(6)">Min</th>
        <th onclick="sortTable(7)">Max</th>
        <th onclick="sortTable(8)">Dilution %</th>
      </tr>
    </thead>
    <tbody id="pegBody">
      <!-- Kitchen Care -->
      <tr class="category-row"><td colspan="9">Kitchen Care</td></tr>
      <tr data-category="Kitchen Care">
        <td>Suma Break up D3.5</td><td>K</td><td>2%</td><td>4%</td><td>–</td><td>I</td><td>0.8%</td><td>4%</td><td>–</td>
      </tr>
      <tr data-category="Kitchen Care">
        <td>Suma Bac D10</td><td>M</td><td>1%</td><td>4%</td><td>–</td><td>K</td><td>0.8%</td><td>4%</td><td>–</td>
      </tr>
      <tr data-category="Kitchen Care">
        <td>Suma Multi D2</td><td>K</td><td>0.5%</td><td>3%</td><td>–</td><td>M</td><td>0.5%</td><td>4%</td><td>–</td>
      </tr>
      <tr data-category="Kitchen Care">
        <td>Suma Chlor D4.4</td><td>–</td><td>–</td><td>–</td><td>–</td><td>N</td><td>0.5%</td><td>0.8%</td><td>–</td>
      </tr>
      <tr data-category="Kitchen Care">
        <td>Actival</td><td>–</td><td>–</td><td>–</td><td>–</td><td>N</td><td>0.5%</td><td>6%</td><td>–</td>
      </tr>

      <!-- Building Care -->
      <tr class="category-row"><td colspan="9">Building Care</td></tr>
      <tr data-category="Building Care">
        <td>TASKI Sani 4 in 1</td><td>K</td><td>2.3%</td><td>2.9%</td><td>–</td><td>L</td><td>1%</td><td>2.8%</td><td>–</td>
      </tr>
      <tr data-category="Building Care">
        <td>Goodsense Breakdown</td><td>K</td><td>2.5%</td><td>10%</td><td>–</td><td>H</td><td>2.8%</td><td>6.3%</td><td>–</td>
      </tr>
      <tr data-category="Building Care">
        <td>TASKI Sprint 200</td><td>F</td><td>7.7%</td><td>10%</td><td>–</td><td>L</td><td>1%</td><td>10%</td><td>–</td>
      </tr>
      <tr data-category="Building Care">
        <td>TASKI Sani 100</td><td>F</td><td>7.7%</td><td>10%</td><td>–</td><td>L</td><td>1%</td><td>10%</td><td>–</td>
      </tr>

      <!-- Floor Care -->
      <tr class="category-row"><td colspan="9">Floor Care</td></tr>
      <tr data-category="Floor Care">
        <td>Jontec 300</td><td>F</td><td>5%</td><td>8%</td><td>–</td><td>N</td><td>0.4%</td><td>5%</td><td>–</td>
      </tr>
      <tr data-category="Floor Care">
        <td>Jontec Tensol</td><td>F</td><td>5%</td><td>8%</td><td>–</td><td>N</td><td>0.4%</td><td>5%</td><td>–</td>
      </tr>
      <tr data-category="Floor Care">
        <td>Jontec Best</td><td>–</td><td>–</td><td>–</td><td>–</td><td>N</td><td>0.4%</td><td>5%</td><td>–</td>
      </tr>
      <tr data-category="Floor Care">
        <td>Jontec Forward</td><td>–</td><td>–</td><td>–</td><td>–</td><td>N</td><td>0.4%</td><td>10%</td><td>–</td>
      </tr>
    </tbody>
  </table>

  <script>
    const searchInput = document.getElementById('search');
    const categoryFilter = document.getElementById('categoryFilter');
    const tableRows = document.querySelectorAll('#pegBody tr');

    searchInput.addEventListener('input', filterTable);
    categoryFilter.addEventListener('change', filterTable);

    function filterTable() {
      const query = searchInput.value.toLowerCase();
      const selectedCategory = categoryFilter.value;

      tableRows.forEach(row => {
        if (row.classList.contains('category-row')) return;

        const product = row.cells[0].textContent.toLowerCase();
        const category = row.dataset.category;

        const matchesSearch = product.includes(query);
        const matchesCategory = (selectedCategory === "All" || category === selectedCategory);

        row.classList.toggle('hidden', !(matchesSearch && matchesCategory));
      });
    }

    function sortTable(n) {
      const table = document.getElementById("pegTable");
      let switching = true;
      let dir = "asc";
      let switchcount = 0;

      while (switching) {
        switching = false;
        const rows = table.rows;
        for (let i = 2; i < rows.length - 1; i++) {
          if (rows[i].classList.contains('category-row') || rows[i + 1].classList.contains('category-row')) continue;
          let shouldSwitch = false;
          const x = rows[i].getElementsByTagName("TD")[n];
          const y = rows[i + 1].getElementsByTagName("TD")[n];

          let xContent = x.textContent.replace('%','');
          let yContent = y.textContent.replace('%','');
          const xVal = isNaN(parseFloat(xContent)) ? xContent.toLowerCase() : parseFloat(xContent);
          const yVal = isNaN(parseFloat(yContent)) ? yContent.toLowerCase() : parseFloat(yContent);

          if ((dir == "asc" && xVal > yVal) || (dir == "desc" && xVal < yVal)) {
            shouldSwitch = true;
            break;
          }
        }
        if (shouldSwitch) {
          rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
          switching = true;
          switchcount++;
        } else {
          if (switchcount == 0 && dir == "asc") {
            dir = "desc";
            switching = true;
          }
        }
      }
    }
  </script>

</body>
</html>
